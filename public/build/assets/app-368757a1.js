const y=()=>{mapboxgl.accessToken="pk.eyJ1IjoibWFyY2VsaXRvb29vIiwiYSI6ImNtNm1hNG5vdDBmaGUya3NoZnRldnhqd3YifQ.CMI4nKvoE7I8H9Dal7IHyw";var e=new mapboxgl.Map({container:"map",style:"mapbox://styles/marcelitoooo/ck16ms7m51nlo1cmwnqrbjuyq?optimize=true",center:[8.515378841985529,47.39625055471236],zoom:13});e.addControl(new mapboxgl.NavigationControl),e.scrollZoom.disable();var s={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[8.515378841985529,47.39625055471236]},properties:{title:"Wohnen in Zürich-Wipkingen",description:"Zürich"}}]};s.features.forEach(function(d){var r=document.createElement("div");r.className="marker",new mapboxgl.Marker(r).setLngLat(d.geometry.coordinates).addTo(e)})},v=()=>{var e=document.createElement("script");e.src="https://api.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.js",e.async=!0,document.head.appendChild(e),e.onload=()=>{document.getElementById("map")!==null&&y()}};v();const E=function(){const e={body:"body",attribute:".js-filter-attribute",building:"[data-building]",object:"[data-object]",btnReset:".js-btn-reset"};let s={};const d=function(){r()},r=function(){document.querySelector(e.body).addEventListener("change",function(o){o.target.matches(e.attribute)&&f(o.target)}),document.querySelector(e.body).addEventListener("click",function(o){o.target.matches(e.btnReset)&&b(o)})},f=function(o){const c=o.getAttribute("data-filterType"),a=o.value;a==="NULL"?delete s[c]:s[c]=String(a),u()},u=function(){if(Object.keys(s).length>0){let o="";Object.keys(s).forEach(function(c){const a=s[c];a.length>0&&(o+=`[data-${c}="${a}"]`)}),o.length>0&&(document.querySelectorAll(e.object).forEach(function(c){c.style.display="none"}),document.querySelectorAll(o).forEach(function(c){c.style.display="table-row"}))}else document.querySelectorAll(e.object).forEach(function(o){o.style.display="table-row"}),document.querySelectorAll(e.building).forEach(function(o){o.style.display="block"})},b=function(o){o.preventDefault(),s={},document.querySelectorAll("select").forEach(function(c){c.selectedIndex=0}),u()};return{init:d}}();E.init();const S=function(){const e={body:"body",object:"[data-object]",building:"[data-building]",iso:"[data-iso]",floor:"[data-iso-floor]"},s=function(){d()},d=function(){document.querySelectorAll(e.floor).forEach(function(t){t.addEventListener("mouseover",function(){o(t)}),t.addEventListener("mouseleave",function(){c(t)})}),document.querySelectorAll(e.object).forEach(function(t){t.addEventListener("mouseover",function(){r(t)}),t.addEventListener("click",function(){r(t)}),t.addEventListener("mouseout",function(){u()})}),document.querySelectorAll(e.iso).forEach(function(t){t.addEventListener("mouseover",function(){f(t)}),t.addEventListener("touchstart",function(){f(t)}),t.addEventListener("touchend",function(){b(),u()}),t.addEventListener("mouseout",function(){b(),u()})})},r=function(t,i=!0){const n=t.dataset;document.querySelectorAll('[data-iso="'+n.objectNumber+'"]').forEach(function(m){if(m&&(m.classList.add("is-active",n.objectState==="free"?"is-available":"is-taken"),i)){const g=m.parentElement;a(g).forEach(function(h){h.classList.add("is-up")})}})},f=function(t){const i=t.dataset,n=document.querySelector('[data-object-number="'+i.iso+'"]');if(!n)return;const l=n.dataset;n.classList.add("is-active"),document.querySelectorAll('[data-iso="'+i.iso+'"]').forEach(function(g){g.classList.add("is-active",l.objectState==="free"?"is-available":"is-taken")})},u=function(){document.querySelectorAll(e.iso).forEach(function(t){t.classList.remove("is-active","is-available","is-taken");const i=t.parentElement,n=p(i);i.classList.remove("is-up"),n.forEach(function(l){l.classList.remove("is-up")})})},b=function(){document.querySelectorAll(e.object).forEach(function(t){t.classList.remove("is-active")})},o=t=>{a(t).forEach(function(n){n.classList.add("is-up")})},c=t=>{a(t).forEach(function(n){n.classList.remove("is-up")})},a=t=>{const i=[];let n=t.nextElementSibling;for(;n;)i.push(n),n=n.nextElementSibling;return i},p=t=>{const i=[];let n=t.nextElementSibling;for(;n;)i.push(n),n=n.nextElementSibling;let l=t.previousElementSibling;for(;l;)i.push(l),l=l.previousElementSibling;return i};return{init:s}}();S.init();
